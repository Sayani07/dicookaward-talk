<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>gravitas    GRAnularity VIsualization for Time-series AnalySis  </title>
    <meta charset="utf-8" />
    <meta name="author" content="  Dr. Sayani Gupta     Monash University" />
    <script src="index_files/header-attrs/header-attrs.js"></script>
    <link href="index_files/remark-css/ninjutsu.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/animate.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-logo.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-brand.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-fonts.css" type="text/css" />
    <link rel="stylesheet" href="assets/styles.css" type="text/css" />
    <link rel="stylesheet" href="assets/custom.css" type="text/css" />
    <link rel="stylesheet" href="timeline.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# gravitas <br><small><small> <small> GRAnularity VIsualization for Time-series AnalySis  
]
.author[
### <br> Dr. Sayani Gupta <br>   Monash University
]
.date[
### <font size="5">Presentation of Di Cook Award projects <br> Victorian Branch of the Statistical Society of Australia (SSA Vic) <br> May 17, 2022
]

---









# Outline

.pull-left[
.checked[
- .larger[Why?]  
&lt;br&gt;
- .larger[What?]    
&lt;br&gt;
- .larger[How?]  
   _Methods, Package usage_
]
]

.pull-right[
.animated.bounce[
&lt;img src="images/gravitas_sticker.png" height=280px&gt;
]
]

&lt;br&gt;

.footnote[
_Methodology references_

.smaller[.smaller[.smaller[Gupta, S., Hyndman, R.J., Cook, D. and Unwin, A., 2022. Visualizing probability distributions across bivariate cyclic temporal granularities. Journal of Computational  
and Graphical Statistics, 31(1), pp.14-25]]]

.smaller[.smaller[.smaller[Gupta, S., Hyndman, R.J. and Cook, D., 2021. Detecting Distributional Differences Between Temporal Granularities for Exploratory Time Series Analysis (No. 20/21).  
Monash University, Department of Econometrics and Business Statistics.]]]
]
---
# Why? 



&lt;img src="figure/elec-rawnew-1.svg" width="90%" style="display: block; margin: auto;" /&gt;

.center[
.card[.smaller[Electricity demand series]]
.card[.smaller[many households]]
.card[.smaller[fine time resolutions]]
.card[.smaller[many measurements]]
.card[.smaller[no pattern visible in the squeezed linear view]]
.card[.smaller[different start and end date]]
.card[.smaller[missing observations]]
]


---
# Why? (continued)

&lt;br&gt;

.center[**To provide methods to better understand patterns of these sort of large quantities of time series data that are observed more than once per year**]

.footnote[.smaller[.smaller[
Applicable to any temporal data collected more than once a year

- traffic sensors, pedestrian movement data in metro stations, public buildings,
cab or bike rides

or more broadly,

-  temporal data observed by years, decades, and centuries

or,

- non-temporal data with a hierarchical nested ordering similar to time.

]]]
---

# What? 

&lt;br&gt;

&lt;br&gt;

.center[Visualize and analyze **probability distributions** to explore large quantities of temporal data across different **time deconstructions** to find **underlying patterns ** in behavior.]

???
Why probability distributions? Which time deconstructions can help find underlying patterns?

---
# What? (continued)

.pull-left[

.smaller[**Which time deconstructions can help identifying patterns?**  

Cyclic granularities: e.g. hour-of-day, day-of-month or  hour-of-week, day-of-semester]
    &lt;br&gt;
    &lt;br&gt;
 .smaller[**Why probability distributions?**  
 
   Multiple observations for each level of cyclic granularity  
   summarize distribution of measured variables]
 
]

.pull-right[
&lt;img src="figure/linear2cyclic-1.png" style="display: block; margin: auto;" /&gt;&lt;img src="figure/linear2cyclic-2.png" style="display: block; margin: auto;" /&gt;
]

---
# How? (methods)

.smaller[
- describes classes of time deconstructions using linear and cyclic time
granularities.
- provides tools to compute possible cyclic granularities from an ordered (usually
temporal) index
- check the feasibility of creating plots by identifying "harmonies" and "clashes"
- refining the search to obtain "significant" harmonies to find "significant" patterns
]
---

class:left, top

#  Interaction between cyclic granularities




&lt;img src="figure/bothclash2-1.svg" width="80%" style="display: block; margin: auto;" /&gt;

.smaller[
.card[_Clashes_: pairs leading to empty sets]
.card[_Harmonies_: pairs leading to no empty sets]  
.smaller[
]
]

---

#  Inference

.left-column[
&lt;br&gt;
- Sample designs
- Rank harmonies `\(a&lt;b&lt;c&lt;d\)`
- Gestalt theory
- distance to compute within and between facet variation
- define a threshold for significance
]

.right-column[
&lt;img src="figs/example-design.png" width="90%" style="display: block; margin: auto;" /&gt;
]
.smaller[
.smaller[
.smaller[
**Designs:** 
`\(a \gets D_{null}\)`, `\(b\gets D_{var_f}\)`,  `\(c\gets D_{var_x}\)`, `\(d \gets D_{var_{all}}\)`
]
]
]

---

# How? (package functions)

.smaller[
 
.pull-left[

### 1. Computation
--- 
- Compute any cyclic granularity? `create_gran()`
 &lt;br&gt;
- Exhaustive list of granularities to explore? `search_gran()`
 &lt;br&gt;
 &lt;br&gt;
 
### 2. Interaction
 --- 
- Check if cyclic granularities are harmonies/clashes? `is.harmony()`
&lt;br&gt;
- List of harmonies to explore? `harmony()`
&lt;br&gt;]

.pull-right[
### 3. Visualization
--- 
- Plot harmonies? `prob_plot()`
&lt;br&gt;
- Sufficient observations? `gran_obs()`
&lt;br&gt;
- Recommendations on feasibility? `gran_advice()`
&lt;br&gt;
### 4. Inference
--- 
- Select only interesting displays? `select_harmonies()`
&lt;br&gt;
- Rank interesting displays `rank_harmonies()`
]
 
]
---
# Melbourne households example: show me the data

&lt;img src="figure/linear-scale-8new-1.svg" style="display: block; margin: auto;" /&gt;


---
#  Melbourne households example: systematic search

```r
elec %&gt;% 
*  search_gran(lowest_unit = "hour",
*              highest_unit = "month", 
*              filter_in = "wknd_wday", 
*              filter_out = "fortnight")
```


```
#&gt; [1] "hour_day"   "hour_week"  "hour_month" "day_week"   "day_month" 
#&gt; [6] "week_month" "wknd_wday"
```
&lt;br&gt;

- There are `\(^{7} P_2 = 42\)` pairs of granularities to look at looking at two at a time.
- 42 visualizations to interpret?

---
#  Melbourne households example: harmonies

```r
elec %&gt;% 
*  harmony(ugran = "month",
*       filter_in = "wknd_wday",
*       filter_out = c("hhour", "fortnight")
```


```
#&gt; # A tibble: 14 × 4
#&gt;    facet_variable x_variable facet_levels x_levels
#&gt;    &lt;chr&gt;          &lt;chr&gt;             &lt;int&gt;    &lt;int&gt;
#&gt;  1 day_week       hour_day              7       24
#&gt;  2 day_month      hour_day             31       24
#&gt;  3 week_month     hour_day              5       24
#&gt;  4 wknd_wday      hour_day              2       24
#&gt;  5 hour_day       day_week             24        7
#&gt;  6 week_month     day_week              5        7
#&gt;  7 hour_day       day_month            24       31
#&gt;  8 wknd_wday      day_month             2       31
#&gt;  9 hour_day       week_month           24        5
#&gt; 10 day_week       week_month            7        5
#&gt; 11 wknd_wday      week_month            2        5
#&gt; 12 hour_day       wknd_wday            24        2
#&gt; 13 day_month      wknd_wday            31        2
#&gt; 14 week_month     wknd_wday             5        2
```

.smaller[
- only 14 out of 42 are harmonies &lt;br&gt;
- plotting other 28 pairs lead to empty combinations
]

---
#  Melbourne households example: significant harmonies

&lt;img src="figs/rank-table2.png" width="60%" style="display: block; margin: auto;" /&gt;
.smaller[
- Only 2 or 3 harmony pairs out of 14 are significant for any household 
- Significant pairs differ across households
]
---
#  Melbourne households example: compare households
.left-column[
.checked[
.smaller[
- Ensemble plot with a heatmap (a), line plot (b), parallel coordinate plot (c)
- (a) and (b) display the household ids in the same order 
- (a) shows wpd values across harmonies with significant harmony is shown with an asterisk
- (c) compares households across harmonies.
]
]
]
.right-column[
&lt;img src="figure/tilemap-withlabel.png" width="73%" style="display: block; margin: auto;" /&gt;
]

---
#  Melbourne households example: compare households

.left-column[
```r
elec %&gt;%
  filter(id == 1) %&gt;% 
  prob_plot("day_week",
            "hour_day",
            response = "kwh",
            plot_type = "quantile",
            symmetric = TRUE,
            quantile_prob = c(0.1, 0.25, 0.5, 0.75, 0.9), nrow = 1)
```
.checked[
.smaller[
- Table suggests harmony pair (dow, hod) is significant
for household id 7, but not for id 1.
- For id 1, patterns look similar within different days of weekdays
and weekends
- For id 7 more fluctuations observed across median and 75th percentile for different hours of the day
and day of week.

]
]
]
.right-column[
&lt;img src="figure/compare-household.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
class: center, left

## More Information

Package : https://github.com/Sayani07/gravitas  
Slides : https://sayani.netlify.app/dicookaward2022

&lt;br&gt;

## My Contact Details

gupta.sayani@gmail.com  
https://github.com/Sayani07  
https://sayani.netlify.app/

&lt;br&gt;

## Joint work with

Professor Rob J Hyndman  Professor Dianne Cook 



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
